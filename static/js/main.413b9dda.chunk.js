(this["webpackJsonpreact-query-graphql-app"]=this["webpackJsonpreact-query-graphql-app"]||[]).push([[0],{35:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a,s,r,c=n(0),i=n.n(c),l=n(21),o=n.n(l),d=(n(35),n(45)),u=n(22),m=n(4),b=n.n(m),x=n(6),p=n(7),h=n(10),j=n(46),f=n(16),g=Object(h.gql)(a||(a=Object(f.a)(["\n  query {\n    getClients {\n      id\n      firstName\n      lastName\n      phone\n      avatarUrl\n    }\n  }\n"]))),v=n(2),y=function(){return Object(v.jsxs)("div",{className:"border border-light-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto flex justify-center items-center",children:[Object(v.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"animate-spin h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(v.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),Object(v.jsx)("span",{children:"Loading..."})]})},O=function(){return Object(v.jsx)("div",{className:"border border-red-600 shadow rounded-md p-4 max-w-sm w-full mx-auto text-center text-red-600",children:"Something went wrong!"})},w=n(19),N=n(30),k=n(47),q=n(14),C=function(){var e=Object(x.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.request)("https://test-task.expane.pro/api/graphql",Object(h.gql)(s||(s=Object(f.a)(['\n      mutation {\n        addClient(firstName: "','", lastName: "','", phone: "','", avatarUrl: "','") {\n          firstName\n          lastName\n          phone\n          avatarUrl\n        }\n      }\n    '])),t.firstName,t.lastName,t.phone,t.avatarUrl));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(x.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.request)("https://test-task.expane.pro/api/graphql",Object(h.gql)(r||(r=Object(f.a)(['\n      mutation {\n        updateClient(id: "','", firstName: "','", lastName: "','", phone: "','", avatarUrl: "','") {\n          id\n          firstName\n          lastName\n          phone\n          avatarUrl\n        }\n      }\n    '])),t.id,t.firstName,t.lastName,t.phone,t.avatarUrl));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L=function(e){var t=e.open,n=e.hide,a=e.client,s=e.refetch,r=Object(N.a)(),i=r.register,l=r.handleSubmit,o=r.formState.errors,d=Object(k.a)(C),u=Object(k.a)(F),m=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,u.mutateAsync(Object(w.a)({id:a.id},t));case 3:e.next=7;break;case 5:return e.next=7,d.mutateAsync(t);case 7:s();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=function(){s(),n()};return Object(v.jsx)(q.b.Root,{show:t,as:c.Fragment,children:Object(v.jsx)(q.a,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto",open:t,onClose:p,children:Object(v.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(v.jsx)(q.b.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(v.jsx)(q.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(v.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(v.jsx)(q.b.Child,{as:c.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(v.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(v.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(v.jsx)("div",{className:"mt-3 flex justify-center items-center",children:Object(v.jsx)(q.a.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900 text-center mb-4",children:a?"Edit":"Add"})})}),Object(v.jsxs)("form",{className:"px-4",onSubmit:l(m),children:[Object(v.jsxs)("div",{className:"mb-4 flex justify-center items-center",children:[Object(v.jsx)("input",Object(w.a)({className:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full",placeholder:"First Name",defaultValue:null===a||void 0===a?void 0:a.firstName},i("firstName",{required:!0,maxLength:20}))),(null===o||void 0===o?void 0:o.firstName)&&Object(v.jsx)("p",{className:"text-red-800",children:"First Name is required, max length is 20"})]}),Object(v.jsxs)("div",{className:"mb-4 flex justify-center items-center",children:[Object(v.jsx)("input",Object(w.a)({className:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full",placeholder:"Last Name",defaultValue:null===a||void 0===a?void 0:a.lastName},i("lastName",{required:!0,maxLength:20}))),(null===o||void 0===o?void 0:o.lastName)&&Object(v.jsx)("p",{className:"text-red-800",children:"Last Name is required, max length is 20"})]}),Object(v.jsxs)("div",{className:"mb-4 flex justify-center items-center",children:[Object(v.jsx)("input",Object(w.a)({className:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full",placeholder:"Phone number",type:"number",defaultValue:null===a||void 0===a?void 0:a.phone},i("phone"))),(null===o||void 0===o?void 0:o.phone)&&Object(v.jsx)("p",{className:"text-red-800",children:"Only numbers"})]}),Object(v.jsxs)("div",{className:"mb-4 flex justify-center items-center",children:[Object(v.jsx)("input",Object(w.a)({className:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full",placeholder:"Link to Avatar",defaultValue:null===a||void 0===a?void 0:a.avatarUrl},i("avatarUrl"))),(null===o||void 0===o?void 0:o.avatarUrl)&&Object(v.jsx)("p",{className:"text-red-800",children:"Add link to image"})]}),Object(v.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:justify-end",children:[Object(v.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:p,children:"Cancel"}),Object(v.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-300 text-base font-medium text-white hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n,children:"Save"})]})]})]})})]})})})},U=function(){var e=function(){var e=Object(c.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1];return{open:n,toggleModal:function(){a((function(e){return!e}))}}}(),t=e.open,n=e.toggleModal,a=Object(c.useState)(null),s=Object(p.a)(a,2),r=s[0],i=s[1],l=function(){var e=Object(x.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.request)("https://test-task.expane.pro/api/graphql",g);case 2:return t=e.sent,n=t.getClients,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=Object(j.a)("clients",l),d=o.data,u=o.isLoading,m=o.isFetching,f=o.error,w=o.refetch;return u||m?Object(v.jsx)(y,{}):f?Object(v.jsx)(O,{}):Object(v.jsxs)("div",{className:"flex flex-col max-w-xl mx-auto",children:[Object(v.jsx)("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:Object(v.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(v.jsxs)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:[Object(v.jsxs)("div",{className:"flex justify-center items-center bg-blue-50 px-6 py-4",children:[Object(v.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 text-center m-auto",children:"Clients List"}),Object(v.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),i(null),n()},className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-300 text-base font-medium text-white hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add"})]}),Object(v.jsxs)("table",{className:"max-w-lg min-w-full mx-auto divide-y divide-gray-200",children:[Object(v.jsx)("thead",{className:"bg-gray-50",children:Object(v.jsxs)("tr",{children:[Object(v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avatar"}),Object(v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),Object(v.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),Object(v.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:Object(v.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),Object(v.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===d||void 0===d?void 0:d.map((function(e){return Object(v.jsxs)("tr",{children:[Object(v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(v.jsx)("img",{className:"h-10 w-10 rounded-full truncate",src:e.avatarUrl?e.avatarUrl:"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png",alt:"".concat(e.firstName," ").concat(e.lastName)})}),Object(v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(v.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.firstName," ",e.lastName]})}),Object(v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(v.jsx)("div",{className:"text-sm text-gray-900",children:e.phone?e.phone:"-"})}),Object(v.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:Object(v.jsx)("button",{type:"button",onClick:function(t){return function(e,t){e.preventDefault(),i(t),n()}(t,e)},className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-300 text-base font-medium text-white hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit"})})]},e.id)}))})]})]})})}),Object(v.jsx)(L,{open:t,hide:n,client:r,refetch:w})]})},S=new d.a;var A=function(){return Object(v.jsx)("div",{className:"p-8 bg-gray-200 min-h-screen",children:Object(v.jsx)(u.a,{client:S,children:Object(v.jsx)(U,{})})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,c=t.getTTFB;n(e),a(e),s(e),r(e),c(e)}))};o.a.render(Object(v.jsx)(i.a.StrictMode,{children:Object(v.jsx)(A,{})}),document.getElementById("root")),G()}},[[42,1,2]]]);
//# sourceMappingURL=main.413b9dda.chunk.js.map