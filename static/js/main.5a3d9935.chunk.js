(this["webpackJsonpreact-query-graphql-app"]=this["webpackJsonpreact-query-graphql-app"]||[]).push([[0],{35:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var a,s,r,l=n(0),c=n.n(l),i=n(21),o=n.n(i),d=(n(35),n(45)),u=n(22),m=n(4),b=n.n(m),x=n(6),p=n(7),h=n(10),j=n(46),f=n(16),g=Object(h.gql)(a||(a=Object(f.a)(["\n  query {\n    getClients {\n      id\n      firstName\n      lastName\n      phone\n      avatarUrl\n    }\n  }\n"]))),v=n(19),O=n(30),y=n(47),w=n(14),N=function(){var e=Object(x.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.request)("https://test-task.expane.pro/api/graphql",Object(h.gql)(s||(s=Object(f.a)(['\n      mutation {\n        addClient(firstName: "','", lastName: "','", phone: "','", avatarUrl: "','") {\n          firstName\n          lastName\n          phone\n          avatarUrl\n        }\n      }\n    '])),t.firstName,t.lastName,t.phone,t.avatarUrl));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=Object(x.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.request)("https://test-task.expane.pro/api/graphql",Object(h.gql)(r||(r=Object(f.a)(['\n      mutation {\n        updateClient(id: "','", firstName: "','", lastName: "','", phone: "','", avatarUrl: "','") {\n          id\n          firstName\n          lastName\n          phone\n          avatarUrl\n        }\n      }\n    '])),t.id,t.firstName,t.lastName,t.phone,t.avatarUrl));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C=n(1),q=function(e){var t=e.open,n=e.hide,a=e.client,s=e.setCurrentClient,r=e.refetch,c=Object(O.a)(),i=c.register,o=c.handleSubmit,d=c.reset,u=c.formState.errors;Object(l.useEffect)((function(){d(),s(a)}),[a,s,d]);var m=Object(y.a)(N),p=Object(y.a)(k),h=function(){var e=Object(x.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a){e.next=5;break}return e.next=3,p.mutateAsync(Object(v.a)({id:a.id},t));case 3:e.next=7;break;case 5:return e.next=7,m.mutateAsync(t);case 7:r();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){s(null),d(),r(),n()};return Object(C.jsx)(w.b.Root,{show:t,as:l.Fragment,children:Object(C.jsx)(w.a,{as:"div",static:!0,className:"fixed z-10 inset-0 overflow-y-auto",open:t,onClose:j,children:Object(C.jsxs)("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[Object(C.jsx)(w.b.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:Object(C.jsx)(w.a.Overlay,{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),Object(C.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),Object(C.jsx)(w.b.Child,{as:l.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:Object(C.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[Object(C.jsx)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:Object(C.jsx)("div",{className:"mt-3 flex justify-center items-center",children:Object(C.jsx)(w.a.Title,{as:"h3",className:"text-lg leading-6 font-medium text-gray-900 text-center mb-4",children:a?"Edit":"Add"})})}),Object(C.jsxs)("form",{className:"px-4",onSubmit:o(h),children:[Object(C.jsxs)("div",{className:"mb-4 flex flex-col",children:[Object(C.jsx)("input",Object(v.a)({className:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full",placeholder:"First Name",defaultValue:null===a||void 0===a?void 0:a.firstName},i("firstName",{required:!0,maxLength:20}))),(null===u||void 0===u?void 0:u.firstName)&&Object(C.jsx)("p",{className:"text-red-800",children:"First Name is required, max length is 20"})]}),Object(C.jsxs)("div",{className:"mb-4 flex flex-col",children:[Object(C.jsx)("input",Object(v.a)({className:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full",placeholder:"Last Name",defaultValue:null===a||void 0===a?void 0:a.lastName},i("lastName",{required:!0,maxLength:20}))),(null===u||void 0===u?void 0:u.lastName)&&Object(C.jsx)("p",{className:"text-red-800",children:"Last Name is required, max length is 20"})]}),Object(C.jsxs)("div",{className:"mb-4 flex flex-col",children:[Object(C.jsx)("input",Object(v.a)({className:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full",placeholder:"Phone number",type:"number",defaultValue:null===a||void 0===a?void 0:a.phone},i("phone"))),(null===u||void 0===u?void 0:u.phone)&&Object(C.jsx)("p",{className:"text-red-800",children:"Only numbers"})]}),Object(C.jsxs)("div",{className:"mb-4 flex flex-col",children:[Object(C.jsx)("input",Object(v.a)({className:"px-3 py-3 placeholder-blueGray-300 text-blueGray-600 relative bg-white bg-white rounded text-sm shadow outline-none focus:outline-none focus:shadow-outline w-full",placeholder:"Link to Avatar",defaultValue:null===a||void 0===a?void 0:a.avatarUrl},i("avatarUrl"))),(null===u||void 0===u?void 0:u.avatarUrl)&&Object(C.jsx)("p",{className:"text-red-800",children:"Add link to image"})]}),Object(C.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:justify-end",children:[Object(C.jsx)("button",{type:"button",className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-400 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",onClick:j,children:"Cancel"}),Object(C.jsx)("button",{type:"submit",className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-300 text-base font-medium text-white hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",onClick:n,children:"Save"})]})]})]})})]})})})},F=function(e){var t=e.client;return Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(C.jsx)("img",{className:"h-10 w-10 rounded-full truncate",src:t.avatarUrl?t.avatarUrl:"https://iupac.org/wp-content/uploads/2018/05/default-avatar.png",alt:"".concat(t.firstName," ").concat(t.lastName)})}),Object(C.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(C.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.firstName," ",t.lastName]})}),Object(C.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:Object(C.jsx)("div",{className:"text-sm text-gray-900",children:t.phone?t.phone:"-"})})]})},U=function(){return Object(C.jsxs)("div",{className:"border border-light-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto flex justify-center items-center",children:[Object(C.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"animate-spin h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:Object(C.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),Object(C.jsx)("span",{children:"Loading..."})]})},L=function(){return Object(C.jsx)("div",{className:"border border-red-600 shadow rounded-md p-4 max-w-sm w-full mx-auto text-center text-red-600",children:"Something went wrong!"})},S=function(){return Object(C.jsx)("div",{className:"border border-light-blue-300 shadow rounded-md p-4 max-w-sm w-full mx-auto flex justify-center items-center",children:"Update..."})},A=function(){var e=function(){var e=Object(l.useState)(!1),t=Object(p.a)(e,2),n=t[0],a=t[1];return{open:n,toggleModal:function(){a((function(e){return!e}))}}}(),t=e.open,n=e.toggleModal,a=Object(l.useState)(null),s=Object(p.a)(a,2),r=s[0],c=s[1],i=function(){var e=Object(x.a)(b.a.mark((function e(){var t,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(h.request)("https://test-task.expane.pro/api/graphql",g);case 2:return t=e.sent,n=t.getClients,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),o=Object(j.a)("clients",i),d=o.data,u=o.isLoading,m=o.isFetching,f=o.error,v=o.refetch;return u?Object(C.jsx)(U,{}):f?Object(C.jsx)(L,{}):Object(C.jsxs)("div",{className:"flex flex-col max-w-xl mx-auto",children:[Object(C.jsx)("div",{className:"-my-2 sm:-mx-6 lg:-mx-8",children:Object(C.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:Object(C.jsxs)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:[Object(C.jsxs)("div",{className:"flex justify-center items-center bg-blue-50 px-6 py-4",children:[Object(C.jsx)("h2",{className:"text-2xl font-bold leading-7 text-gray-900 text-center m-auto",children:"Clients List"}),Object(C.jsx)("button",{type:"button",onClick:function(e){e.preventDefault(),c(null),n()},className:"inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-300 text-base font-medium text-white hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add"})]}),Object(C.jsxs)("table",{className:"max-w-lg min-w-full mx-auto divide-y divide-gray-200",children:[Object(C.jsx)("thead",{className:"bg-gray-50",children:Object(C.jsxs)("tr",{children:[Object(C.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Avatar"}),Object(C.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),Object(C.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Phone"}),Object(C.jsx)("th",{scope:"col",className:"relative px-6 py-3",children:Object(C.jsx)("span",{className:"sr-only",children:"Edit"})})]})}),Object(C.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null===d||void 0===d?void 0:d.map((function(e){return Object(C.jsxs)("tr",{children:[Object(C.jsx)(F,{client:e}),Object(C.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:Object(C.jsx)("button",{type:"button",onClick:function(t){return function(e,t){e.preventDefault(),c(t),n()}(t,e)},className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-300 text-base font-medium text-white hover:bg-blue-400 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Edit"})})]},e.id)}))})]})]})})}),m&&Object(C.jsx)(S,{}),Object(C.jsx)(q,{open:t,hide:n,client:r,setCurrentClient:c,refetch:v})]})},G=new d.a;var T=function(){return Object(C.jsx)("div",{className:"p-8 bg-gray-200 min-h-screen",children:Object(C.jsx)(u.a,{client:G,children:Object(C.jsx)(A,{})})})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,48)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,r=t.getLCP,l=t.getTTFB;n(e),a(e),s(e),r(e),l(e)}))};o.a.render(Object(C.jsx)(c.a.StrictMode,{children:Object(C.jsx)(T,{})}),document.getElementById("root")),E()}},[[42,1,2]]]);
//# sourceMappingURL=main.5a3d9935.chunk.js.map